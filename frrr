-- MM2 Auto Trade DEBUG VERSION
local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏
local AUTO_TRADE_ENABLED = false
local AUTO_ADD_ENABLED = false

-- –°–æ–∑–¥–∞–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "DebugAutoTrade"
screenGui.Parent = playerGui

local mainFrame = Instance.new("Frame")
mainFrame.Size = UDim2.new(0, 300, 0, 200)
mainFrame.Position = UDim2.new(0, 10, 0, 10)
mainFrame.BackgroundColor3 = Color3.fromRGB(40, 40, 50)
mainFrame.BorderSizePixel = 0
mainFrame.Parent = screenGui

local corner = Instance.new("UICorner")
corner.CornerRadius = UDim.new(0, 8)
corner.Parent = mainFrame

-- –ó–∞–≥–æ–ª–æ–≤–æ–∫
local title = Instance.new("TextLabel")
title.Size = UDim2.new(1, 0, 0, 30)
title.Text = "MM2 Auto Trade DEBUG"
title.TextColor3 = Color3.fromRGB(255, 255, 255)
title.BackgroundColor3 = Color3.fromRGB(60, 60, 80)
title.TextSize = 16
title.Font = Enum.Font.GothamBold
title.Parent = mainFrame

-- –ö–Ω–æ–ø–∫–∞ –∞–≤—Ç–æ—Ç—Ä–µ–π–¥–∞
local tradeToggle = Instance.new("TextButton")
tradeToggle.Size = UDim2.new(0.9, 0, 0, 35)
tradeToggle.Position = UDim2.new(0.05, 0, 0, 35)
tradeToggle.Text = "–ê–≤—Ç–æ—Ç—Ä–µ–π–¥: –í–´–ö–õ"
tradeToggle.TextColor3 = Color3.fromRGB(255, 255, 255)
tradeToggle.BackgroundColor3 = Color3.fromRGB(200, 60, 60)
tradeToggle.TextSize = 14
tradeToggle.Parent = mainFrame

-- –ö–Ω–æ–ø–∫–∞ –∞–≤—Ç–æ-–¥–æ–±–∞–≤–ª–µ–Ω–∏—è
local addToggle = Instance.new("TextButton")
addToggle.Size = UDim2.new(0.9, 0, 0, 35)
addToggle.Position = UDim2.new(0.05, 0, 0, 75)
addToggle.Text = "–ê–≤—Ç–æ-–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ: –í–´–ö–õ"
addToggle.TextColor3 = Color3.fromRGB(255, 255, 255)
addToggle.BackgroundColor3 = Color3.fromRGB(200, 60, 60)
addToggle.TextSize = 14
addToggle.Parent = mainFrame

-- –°—Ç–∞—Ç—É—Å
local statusLabel = Instance.new("TextLabel")
statusLabel.Size = UDim2.new(0.9, 0, 0, 60)
statusLabel.Position = UDim2.new(0.05, 0, 0, 115)
statusLabel.Text = "–°—Ç–∞—Ç—É—Å: –û–∂–∏–¥–∞–Ω–∏–µ..."
statusLabel.TextColor3 = Color3.fromRGB(220, 220, 220)
statusLabel.BackgroundTransparency = 1
statusLabel.TextSize = 12
statusLabel.TextWrapped = true
statusLabel.Parent = mainFrame

-- –§—É–Ω–∫—Ü–∏—è –¥–ª—è –¥–µ–±–∞–≥–∞ - –ø–æ–∫–∞–∂–µ—Ç –≤—Å–µ GUI
local function debugGUI()
    print("=== –î–ï–ë–ê–ì GUI ===")
    for i, gui in pairs(playerGui:GetChildren()) do
        if gui:IsA("ScreenGui") then
            print(i .. ". " .. gui.Name .. " | Visible: " .. tostring(gui.Visible))
            -- –ü–æ–∫–∞–∂–µ–º –≤—Å–µ –ø–æ—Ç–æ–º–∫–∏
            for j, child in pairs(gui:GetDescendants()) do
                if child:IsA("TextButton") or child:IsA("Frame") then
                    print("   - " .. child.Name .. " | Text: " .. tostring(child.Text))
                end
            end
        end
    end
    print("=================")
end

-- –ò—â–µ–º –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è GUI –¥–ª—è MM2
local function findTradeGUI()
    local possibleNames = {
        "TradeGui",
        "TradingGui", 
        "TradeWindow",
        "TradeFrame",
        "TradingFrame",
        "TradeUI",
        "TradingUI"
    }
    
    for _, name in pairs(possibleNames) do
        local gui = playerGui:FindFirstChild(name)
        if gui and gui:IsA("ScreenGui") then
            return gui
        end
    end
    
    -- –ò—â–µ–º –ø–æ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏—é "trade"
    for _, gui in pairs(playerGui:GetChildren()) do
        if gui:IsA("ScreenGui") and gui.Name:lower():find("trade") then
            return gui
        end
    end
    
    return nil
end

-- –§—É–Ω–∫—Ü–∏—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø—Ä–µ–¥–º–µ—Ç–æ–≤
local function addAllItems()
    if not AUTO_ADD_ENABLED then return 0 end
    
    local backpack = player:FindFirstChild("Backpack")
    if not backpack then return 0 end
    
    local added = 0
    local remotes = {
        "AddItemToTrade",
        "TradeAddItem", 
        "AddToTrade",
        "AddItem",
        "TradeItem",
        "AddItemsToTrade"
    }
    
    -- –ü—Ä–æ–±—É–µ–º —á–µ—Ä–µ–∑ Remote —Å–æ–±—ã—Ç–∏—è
    for _, remoteName in pairs(remotes) do
        local remote = ReplicatedStorage:FindFirstChild(remoteName)
        if remote then
            for _, item in pairs(backpack:GetChildren()) do
                if item:IsA("Tool") then
                    pcall(function()
                        remote:FireServer(item)
                        print("‚úÖ –î–æ–±–∞–≤–ª–µ–Ω: " .. item.Name)
                        added = added + 1
                    end)
                end
            end
        end
    end
    
    -- –ï—Å–ª–∏ –Ω–µ –Ω–∞—à–ª–∏ Remote, –ø—Ä–æ–±—É–µ–º —á–µ—Ä–µ–∑ –∫–ª–∏–∫–∏ –ø–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É
    if added == 0 then
        local tradeGUI = findTradeGUI()
        if tradeGUI then
            for _, item in pairs(backpack:GetChildren()) do
                if item:IsA("Tool") then
                    -- –ò—â–µ–º –∫–Ω–æ–ø–∫—É –ø—Ä–µ–¥–º–µ—Ç–∞ –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ
                    for _, element in pairs(tradeGUI:GetDescendants()) do
                        if element:IsA("ImageButton") and element.Name == item.Name then
                            pcall(function()
                                if firesignal then
                                    firesignal(element.MouseButton1Click)
                                end
                                print("‚úÖ –î–æ–±–∞–≤–ª–µ–Ω —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫—É: " .. item.Name)
                                added = added + 1
                            end)
                        end
                    end
                end
            end
        end
    end
    
    return added
end

-- –§—É–Ω–∫—Ü–∏—è –ø—Ä–∏–Ω—è—Ç–∏—è —Ç—Ä–µ–π–¥–∞
local function acceptTrade()
    if not AUTO_TRADE_ENABLED then return false end
    
    local tradeGUI = findTradeGUI()
    if not tradeGUI then return false end
    
    -- –ò—â–µ–º –∫–Ω–æ–ø–∫–∏ –ø–æ —Ä–∞–∑–Ω—ã–º –Ω–∞–∑–≤–∞–Ω–∏—è–º
    local acceptButtons = {"Accept", "Confirm", "–ü—Ä–∏–Ω—è—Ç—å", "–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å"}
    
    for _, element in pairs(tradeGUI:GetDescendants()) do
        if element:IsA("TextButton") then
            local text = element.Text:lower()
            for _, buttonName in pairs(acceptButtons) do
                if text:find(buttonName:lower()) then
                    pcall(function()
                        if firesignal then
                            firesignal(element.MouseButton1Click)
                            print("üéØ –ù–∞–∂–∞—Ç–∞ –∫–Ω–æ–ø–∫–∞: " .. element.Text)
                        end
                        element.BackgroundColor3 = Color3.new(0, 1, 0)
                    end)
                    return true
                end
            end
        end
    end
    
    -- –ü—Ä–æ–±—É–µ–º Remote —Å–æ–±—ã—Ç–∏—è
    local acceptRemotes = {
        "AcceptTrade",
        "TradeAccept",
        "ConfirmTrade", 
        "TradeConfirm"
    }
    
    for _, remoteName in pairs(acceptRemotes) do
        local remote = ReplicatedStorage:FindFirstChild(remoteName)
        if remote then
            pcall(function()
                remote:FireServer()
                print("üéØ –¢—Ä–µ–π–¥ –ø—Ä–∏–Ω—è—Ç —á–µ—Ä–µ–∑: " .. remoteName)
                return true
            end)
        end
    end
    
    return false
end

-- –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–Ω–æ–ø–æ–∫
tradeToggle.MouseButton1Click:Connect(function()
    AUTO_TRADE_ENABLED = not AUTO_TRADE_ENABLED
    if AUTO_TRADE_ENABLED then
        tradeToggle.Text = "–ê–≤—Ç–æ—Ç—Ä–µ–π–¥: –í–ö–õ"
        tradeToggle.BackgroundColor3 = Color3.fromRGB(60, 200, 80)
    else
        tradeToggle.Text = "–ê–≤—Ç–æ—Ç—Ä–µ–π–¥: –í–´–ö–õ"
        tradeToggle.BackgroundColor3 = Color3.fromRGB(200, 60, 60)
    end
end)

addToggle.MouseButton1Click:Connect(function()
    AUTO_ADD_ENABLED = not AUTO_ADD_ENABLED
    if AUTO_ADD_ENABLED then
        addToggle.Text = "–ê–≤—Ç–æ-–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ: –í–ö–õ"
        addToggle.BackgroundColor3 = Color3.fromRGB(60, 200, 80)
    else
        addToggle.Text = "–ê–≤—Ç–æ-–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ: –í–´–ö–õ"
        addToggle.BackgroundColor3 = Color3.fromRGB(200, 60, 60)
    end
end)

-- –ö–Ω–æ–ø–∫–∞ –¥–µ–±–∞–≥–∞
local debugBtn = Instance.new("TextButton")
debugBtn.Size = UDim2.new(0.9, 0, 0, 25)
debugBtn.Position = UDim2.new(0.05, 0, 0, 180)
debugBtn.Text = "–î–µ–±–∞–≥ GUI"
debugBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
debugBtn.BackgroundColor3 = Color3.fromRGB(80, 80, 160)
debugBtn.TextSize = 12
debugBtn.Parent = mainFrame

debugBtn.MouseButton1Click:Connect(function()
    debugGUI()
    print("–î–µ–±–∞–≥ –∑–∞–≤–µ—Ä—à–µ–Ω - —Å–º–æ—Ç—Ä–∏ F9!")
end)

-- –ì–ª–∞–≤–Ω—ã–π —Ü–∏–∫–ª
spawn(function()
    while true do
        wait(1)
        
        local tradeGUI = findTradeGUI()
        local statusText = ""
        
        if tradeGUI then
            statusText = "–¢—Ä–µ–π–¥ GUI: " .. tradeGUI.Name .. "\n"
            statusText = statusText .. "–í–∏–¥–∏–º—ã–π: " .. tostring(tradeGUI.Visible) .. "\n"
            statusText = statusText .. "–ê–≤—Ç–æ—Ç—Ä–µ–π–¥: " .. (AUTO_TRADE_ENABLED and "–í–ö–õ" : "–í–´–ö–õ") .. "\n"
            statusText = statusText .. "–ê–≤—Ç–æ-–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ: " .. (AUTO_ADD_ENABLED and "–í–ö–õ" : "–í–´–ö–õ")
            
            -- –ï—Å–ª–∏ —Ç—Ä–µ–π–¥ –∞–∫—Ç–∏–≤–µ–Ω - —Ä–∞–±–æ—Ç–∞–µ–º
            if tradeGUI.Visible then
                if AUTO_ADD_ENABLED then
                    local added = addAllItems()
                    if added > 0 then
                        statusText = statusText .. "\n‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ: " .. added .. " –ø—Ä–µ–¥–º–µ—Ç–æ–≤"
                    end
                end
                
                if AUTO_TRADE_ENABLED then
                    if acceptTrade() then
                        statusText = statusText .. "\nüéØ –¢—Ä–µ–π–¥ –ø—Ä–∏–Ω—è—Ç!"
                    end
                end
            end
        else
            statusText = "–¢—Ä–µ–π–¥ GUI: –ù–ï –ù–ê–ô–î–ï–ù\n"
            statusText = statusText .. "–ù–∞–∂–º–∏ '–î–µ–±–∞–≥ GUI' –∏ –ø–æ–∫–∞–∂–∏ —á—Ç–æ –≤ F9"
        end
        
        statusLabel.Text = statusText
    end
end)

print("üîß DEBUG –≤–µ—Ä—Å–∏—è –∑–∞–≥—Ä—É–∂–µ–Ω–∞!")
print("üìù –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:")
print("1. –ù–∞–∂–º–∏ '–î–µ–±–∞–≥ GUI'")
print("2. –ü–æ–∫–∞–∂–∏ —á—Ç–æ –Ω–∞–ø–∏—Å–∞–Ω–æ –≤ F9")
print("3. –í–∫–ª—é—á–∏ –∫–Ω–æ–ø–∫–∏")
print("4. –ù–∞—á–Ω–∏ —Ç–æ—Ä–≥–æ–≤–ª—é")
